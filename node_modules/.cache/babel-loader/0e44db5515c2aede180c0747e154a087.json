{"remainingRequest":"C:\\Users\\User\\Desktop\\VueProjects\\smileclinicspa\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\User\\Desktop\\VueProjects\\smileclinicspa\\src\\store\\modules\\auth.js","dependencies":[{"path":"C:\\Users\\User\\Desktop\\VueProjects\\smileclinicspa\\src\\store\\modules\\auth.js","mtime":1590312193438},{"path":"C:\\Users\\User\\Desktop\\VueProjects\\smileclinicspa\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1590312131696},{"path":"C:\\Users\\User\\Desktop\\VueProjects\\smileclinicspa\\node_modules\\babel-loader\\lib\\index.js","mtime":1590312129819}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL1VzZXIvRGVza3RvcC9WdWVQcm9qZWN0cy9zbWlsZWNsaW5pY3NwYS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGh0dHAgfSBmcm9tICcuLi8uLi9heGlvcy1jb25maWcuanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYXV0aG9yaXphdGlvbl90b2tlbicpIHx8IG51bGwsCiAgICBpZDogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lkJykgfHwgbnVsbAogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBzaW5nX2luOiBmdW5jdGlvbiBzaW5nX2luKHN0YXRlLCB0b2tlbiwgaWQpIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgICAgc3RhdGUuaWQgPSBpZDsKICAgIH0sCiAgICBzaWduX291dDogZnVuY3Rpb24gc2lnbl9vdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSBudWxsOwogICAgICBzdGF0ZS5pZCA9IG51bGw7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBzaW5nX2luOiBmdW5jdGlvbiBzaW5nX2luKGNvbnRleHQsIGNyZWRlbnRpYWxzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgICAgICAgICBodHRwLnBvc3QoJy9hdXRoL3NpZ25pbi8nLCB7CiAgICAgICAgICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBjcmVkZW50aWFscy5wYXNzd29yZAogICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSByZXMuZGF0YS5hdXRob3JpemF0aW9uX3Rva2VuOwogICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IHJlcy5kYXRhLmlkOwogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhdXRob3JpemF0aW9uX3Rva2VuJywgdG9rZW4pOwogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpZCcsIGlkKTsKICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbW1pdCgnc2luZ19pbicsIHsKICAgICAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTsKICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICAgICAgICBhbGVydCgi0JvQvtCz0LjQvSDQuNC70Lgg0L/QsNGA0L7Qu9GMINC90LUg0LLQtdGA0LXQvSIpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNpZ25fdXA6IGZ1bmN0aW9uIHNpZ25fdXAoY29udGV4dCwgY3JlZGVudGlhbHMpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBodHRwLnBvc3QoJy9hdXRoL3NpZ251cC8nLCB7CiAgICAgICAgICBsYXN0X25hbWU6IGNyZWRlbnRpYWxzLmxhc3RfbmFtZSwKICAgICAgICAgIGZpcnN0X25hbWU6IGNyZWRlbnRpYWxzLmZpcnN0X25hbWUsCiAgICAgICAgICBwYXRyb255bWljOiBjcmVkZW50aWFscy5wYXRyb255bWljLAogICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IGNyZWRlbnRpYWxzLnBhc3N3b3JkLAogICAgICAgICAgcG9zaXRpb246IGNyZWRlbnRpYWxzLnBvc2l0aW9uCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNpZ25fb3V0OiBmdW5jdGlvbiBzaWduX291dChjb250ZXh0KSB7CiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOwogICAgICBjb250ZXh0LmNvbW1pdCgnc2lnbl9vdXQnKTsKICAgIH0KICB9LAogIGV0dGVyczogewogICAgYXV0aFN0YXR1czogZnVuY3Rpb24gYXV0aFN0YXR1cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc3RhdHVzOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/Users/User/Desktop/VueProjects/smileclinicspa/src/store/modules/auth.js"],"names":["http","state","token","localStorage","getItem","id","mutations","sing_in","sign_out","actions","context","credentials","Promise","resolve","reject","post","email","password","then","res","data","authorization_token","setItem","commit","catch","error","console","log","alert","sign_up","last_name","first_name","patronymic","position","err","clear","etters","authStatus","status"],"mappings":"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","sourcesContent":["import {http} from '../../axios-config.js'\r\n\r\nexport default {\r\n    state: {\r\n        token: localStorage.getItem('authorization_token') || null,\r\n        id: localStorage.getItem('id') || null,\r\n    },\r\n    mutations: {\r\n        sing_in(state, token, id){\r\n            state.token = token;\r\n            state.id = id;\r\n        },\r\n        sign_out(state){\r\n            state.token = null;\r\n            state.id = null;\r\n        }\r\n    },\r\n    actions:{\r\n        async sing_in(context, credentials){\r\n            return new Promise((resolve, reject) => {\r\n                http.post('/auth/signin/',{\r\n                    email: credentials.email,\r\n                    password: credentials.password\r\n                })\r\n                .then(res => {\r\n                    const token = res.data.authorization_token;\r\n                    const id = res.data.id;\r\n                    localStorage.setItem('authorization_token', token);\r\n                    localStorage.setItem('id', id)\r\n                    context.commit('sing_in', { token, id })\r\n                    resolve(res)\r\n                })\r\n                .catch(error => {\r\n                    console.log('error')\r\n                    reject(error)\r\n                    alert(\"Логин или пароль не верен\")\r\n                })\r\n            })\r\n        },\r\n        sign_up(context, credentials){\r\n            return new Promise((resolve, reject) => {\r\n              http.post('/auth/signup/', {\r\n                last_name: credentials.last_name,\r\n                first_name: credentials.first_name,\r\n                patronymic: credentials.patronymic,\r\n                email: credentials.email,\r\n                password: credentials.password,\r\n                position: credentials.position\r\n              })\r\n              .then(res=>{\r\n                resolve(res)\r\n              })\r\n              .catch(err=>{\r\n                reject(err)\r\n              })\r\n            })\r\n        },\r\n        sign_out(context){\r\n            localStorage.clear();\r\n            context.commit('sign_out')\r\n        }\r\n    },\r\n    etters: {\r\n        authStatus(state) {\r\n            return state.status\r\n        }\r\n\r\n    }\r\n}"]}]}